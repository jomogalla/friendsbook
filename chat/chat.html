<div ng-include="'navbar/sub-navbar.html'"></div>

<hr>

<div class="chat">
	<div class="well well-sm">
		<span ng-show="!vm.messages" class="glyphicon glyphicon-hourglass spin"></span>
		<ul class="list-unstyled">
			<li ng-repeat="message in vm.messages" class="animate-repeat"> 
				<!-- <span class="text-info" ng-show="message.name">{{message.name}}</span> -->
				<!-- <span class="text-info" ng-show="!message.name">{{message.uid}}</span> -->
				<span class="text-info" chatlink uid="message.uid"></span>
				: {{message.message}}
			</li>
		</ul>
	</div>
	<form class="form form-horizontal" ng-submit="vm.submitMessage()" name="chatInput" novalidate>
		<div class="form-group">
			<div class="col-md-10 col-xs-9">
				<input type="text" placeholder="friendsbook chat" class="form-control" ng-model="vm.inputText" name="inputText" required="" autofocus>
			</div>
			<div class="col-md-2 col-xs-3">
				<button type="submit" class="btn btn-block btn-info" ng-disabled="!chatInput.$valid">send</button>
			</div>
		</div>
	</form>
</div>
<script>
	// Cheater script to autoscroll chat to the bottom
	var messageList = $('.well ul');
	var well = $('.well');

	messageList.bind('DOMNodeInserted', function(){
		well[0].scrollTop = well[0].scrollHeight;
	});
</script>